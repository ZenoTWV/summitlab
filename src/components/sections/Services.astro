---
import ServiceCards from '../ui/ServiceCards';
import ScrollReveal from '../animations/ScrollReveal.astro';
import { getI18n } from '../../i18n';
import nl from '../../i18n/locales/nl.json';
import en from '../../i18n/locales/en.json';

const t = getI18n(Astro.currentLocale);
const translations = Astro.currentLocale === 'en' ? en : nl;

const serviceKeys = ['website', 'hosting', 'automation'] as const;
const serviceIcons = {
  website: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/></svg>`,
  hosting: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5V19A9 3 0 0 0 21 19V5"/><path d="M3 12A9 3 0 0 0 21 12"/></svg>`,
  automation: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>`
};

const services = serviceKeys.map((key) => {
  const serviceData = translations.services[key];
  return {
    key,
    icon: serviceIcons[key],
    title: serviceData.title,
    price: serviceData.price,
    note: serviceData.note,
    description: serviceData.description,
    whatYouGet: serviceData.whatYouGet,
    advanced: serviceData.advanced,
    perfectFor: serviceData.perfectFor,
  };
});

const buildOnThisText = translations.services.buildOnThis;
---

<section id="services" class="py-[var(--spacing-section)]">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <ScrollReveal animation="fade-up">
      <div class="text-center mb-16">
        <h2
          class="text-[clamp(1.5rem,3vw+0.25rem,2.5rem)] font-[var(--font-family-heading)] font-bold text-surface-900 mb-4"
        >
          {t('services.title')}
        </h2>
        <p class="text-lg text-surface-600 max-w-2xl mx-auto">
          {t('services.subtitle')}
        </p>
      </div>
    </ScrollReveal>

    <ServiceCards services={services} buildOnThisText={buildOnThisText} client:visible />
  </div>
</section>
